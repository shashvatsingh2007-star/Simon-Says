<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simon Says - Audio Command Game</title>
<link rel="stylesheet" href="./style.css">
</head>
<body>

<h1>Simon Says</h1>

<div id="status">Click Start to begin</div>
<div id="timer">Timer: --</div>

<button id="start" onclick="startGame()">Start Game</button>
<div id="score">Score: 0</div>

<div id="buttons">


    <button class="action-btn" onclick="playerAction('touch your nose')">Touch Nose</button>
    <button class="action-btn" onclick="playerAction('jump')">Jump</button>
    <button class="action-btn" onclick="playerAction('clap your hands')">Clap Hands</button>
    <button class="action-btn" onclick="playerAction('turn around')">Turn Around</button>
    <button class="action-btn" onclick="playerAction('raise your hand')">Raise Hand</button>
    <button class="action-btn" onclick="playerAction('sit down')">Sit Down</button>


    <button class="action-btn" id="ignore" onclick="ignoreCommand()">IGNORE COMMAND</button>

</div>

<script>
    let commands = [
        "touch your nose",
        "jump",
        "clap your hands",
        "turn around",
        "raise your hand",
        "sit down"
    ];

    let currentCommand = "";
    let simonSaid = false;
    let score = 0;
    let acceptingInput = false;

    let timerValue = 10;
    let timerInterval;
    let minTime = 3;

    function speak(text) {
        let msg = new SpeechSynthesisUtterance(text);
        msg.rate = 1;
        speechSynthesis.speak(msg);
    }

    function startGame() {
        score = 0;
        timerValue = 10;
        document.getElementById("score").innerText = "Score: 0";
        nextCommand();
    }

    function startTimer() {
        clearInterval(timerInterval);
        let timeLeft = timerValue;
        document.getElementById("timer").innerText = "Timer: " + timeLeft.toFixed(1);

        timerInterval = setInterval(() => {
            timeLeft -= 0.1;
            document.getElementById("timer").innerText = "Timer: " + timeLeft.toFixed(1);

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                gameOver();
            }
        }, 100);
    }

    function adjustTimerDifficulty() {
        if (score > 0 && score % 10 === 0) {
            timerValue -= 0.5;
            if (timerValue < minTime) timerValue = minTime;
        }
    }

    function nextCommand() {
        acceptingInput = true;
        adjustTimerDifficulty();
        startTimer();

        document.getElementById("status").innerText = "Listen to the command...";

        let randomAction = commands[Math.floor(Math.random() * commands.length)];
        let saySimon = Math.random() < 0.5;

        simonSaid = saySimon;
        currentCommand = randomAction;

        let fullCommand = saySimon ? "Simon says " + randomAction : randomAction;
        speak(fullCommand);
    }

    function playerAction(action) {
        if (!acceptingInput) return;

        clearInterval(timerInterval);

        if (simonSaid && action === currentCommand) {
            score++;
            document.getElementById("score").innerText = "Score: " + score;
            speak("Correct!");
            acceptingInput = false;
            setTimeout(nextCommand, 1200);
        } else {
            gameOver();
        }
    }

    function ignoreCommand() {
        if (!acceptingInput) return;

        clearInterval(timerInterval);

        if (!simonSaid) {
            score++;
            document.getElementById("score").innerText = "Score: " + score;
            speak("Good job ignoring!");
            acceptingInput = false;
            setTimeout(nextCommand, 1200);
        } else {
            gameOver();
        }
    }

    function gameOver() {
        acceptingInput = false;
        clearInterval(timerInterval);
        speak("Wrong! Game Over.");
        document.getElementById("status").innerText =
            "Game Over! Final Score: " + score;
        document.getElementById("timer").innerText = "Timer: --";
    }
</script>

</body>
</html>
